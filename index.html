<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü™î Diwali Ki Shubhkamnayein ü™î</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tiro+Devanagari+Hindi&display=swap" rel="stylesheet">
    <style>
        /* CSS Styles */
        body {
            margin: 0;
            font-family: 'Tiro Devanagari Hindi', serif;
            background: linear-gradient(-45deg, #03071e, #580c1f, #ff6700, #ffc300);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-align: center;
            color: #fff;
            padding: 15px;
            box-sizing: border-box;
            overflow: hidden;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        #fireworks-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        .container {
            position: relative;
            z-index: 1;
            background: rgba(0, 0, 0, 0.65);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 8px 32px 0 rgba(255, 107, 0, 0.37);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            max-width: 450px;
            width: 100%;
            border-style: solid;
            border-width: 5px;
            border-image-slice: 1;
            border-image-source: linear-gradient(to bottom right, #FFD700, #FF8C00);
        }

        .main-heading {
            font-size: 2.5em;
            color: #FFD700;
            animation: flicker 2s linear infinite alternate;
        }

        @keyframes flicker {
            0%, 18%, 22%, 25%, 53%, 57%, 100% {
                text-shadow:
                0 0 4px #fff,
                0 0 11px #ffc400,
                0 0 19px #ff8c00,
                0 0 40px #ff5722,
                0 0 80px #ff5722;
            }
            20%, 24%, 55% { text-shadow: none; }
        }

        .diwali-image {
            max-width: 75%;
            height: auto;
            border-radius: 15px;
            margin: 20px 0;
            border: 4px solid #FFD700;
            box-shadow: 0 0 25px rgba(255, 215, 0, 0.6);
        }

        .sender-greeting {
            font-size: 1.4em;
            margin-top: 15px;
            color: #f1f1f1;
            font-weight: bold;
        }
        
        .sender-name {
            color: #ffc107;
            font-weight: bolder;
        }

        .share-section {
            margin-top: 25px;
            padding: 20px 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .share-section p {
            font-size: 1.1em;
            margin-bottom: 15px;
        }

        #nameInput {
            width: 80%;
            padding: 12px;
            border-radius: 25px;
            border: 2px solid #FFD700;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            font-size: 1em;
            text-align: center;
            font-family: 'Tiro Devanagari Hindi', serif;
        }

        #nameInput:focus {
            outline: none;
            box-shadow: 0 0 10px #FFD700;
        }

        #shareButton {
            display: flex; /* Naya: Logo aur text ko align karne ke liye */
            align-items: center; /* Naya: Vertically center karne ke liye */
            justify-content: center; /* Naya: Horizontally center karne ke liye */
            width: 90%; /* Thoda choda kiya */
            margin: 20px auto 0;
            padding: 12px 15px;
            background: linear-gradient(45deg, #25D366, #128C7E); /* WhatsApp color theme */
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4);
            font-family: 'Tiro Devanagari Hindi', serif;
        }
        
        #shareButton:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(37, 211, 102, 0.7);
        }

        /* Naya CSS: Button ke andar ke SVG logo ke liye */
        #shareButton svg {
            width: 24px;
            height: 24px;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    
    <canvas id="fireworks-canvas"></canvas>

    <div class="container">
        <div id="senderInfo" style="display: none;">
            <p class="sender-greeting"><span id="senderName" class="sender-name"></span> ‡§ï‡•Ä ‡§§‡§∞‡§´ ‡§∏‡•á ‡§Ü‡§™‡§ï‡•ã</p>
        </div>

        <h1 class="main-heading">‡§¶‡§ø‡§µ‡§æ‡§≤‡•Ä ‡§ï‡•Ä ‡§∂‡•Å‡§≠‡§ï‡§æ‡§Æ‡§®‡§æ‡§è‡§Å</h1>
        
        <img src="laxmi.gif" alt="Happy Diwali Animation" class="diwali-image">

        <div class="share-section">
            <p>‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§≤‡§ø‡§ñ‡•á‡§Ç ‡§î‡§∞ ‡§∂‡•Å‡§≠‡§ï‡§æ‡§Æ‡§®‡§æ‡§è‡§Å ‡§≠‡•á‡§ú‡•á‡§Ç!</p>
            <input type="text" id="nameInput" placeholder="‡§Ø‡§π‡§æ‡§Å ‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§≤‡§ø‡§ñ‡•á‡§Ç">
            <!-- NAYA BUTTON HTML -->
            <button id="shareButton">
                <!-- WhatsApp SVG Logo -->
                <svg viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                    <path d="M16.75 13.96c.25.43.53.84.79 1.28.32.55.45.98.37 1.41-.09.52-.41.97-.81 1.3-1.02.86-2.33.95-3.51.52-1.33-.48-2.5-1.42-3.51-2.61C8.89 14.7 8.01 13.5 7.4 12.18c-.44-1-.44-2.14.16-3.15.22-.38.5-.72.82-1.02.4-.38.8-.56 1.23-.53.53.03.95.27 1.28.84l.58 1.01c.32.54.49.99.32 1.48-.12.35-.41.68-.78.96-.3.23-.56.44-.76.65-.21.22-.39.46-.24.78.23.47.66.97 1.15 1.48.65.69 1.28 1.16 1.95 1.4.3.1.63.1.9-.15.29-.26.54-.56.81-.88.42-.48.92-.7 1.45-.58.55.12.98.44 1.29.91l.62 1.01zM12 2a10 10 0 100 20 10 10 0 000-20z"/>
                </svg>
                <span>Share ‡§ï‡§∞‡•á‡§Ç</span>
            </button>
        </div>
    </div>

    <script>
        // JavaScript Logic
        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            const senderName = urlParams.get('from');
            
            if (senderName) {
                const decodedName = decodeURIComponent(senderName);
                document.getElementById('senderName').textContent = decodedName;
                document.getElementById('senderInfo').style.display = 'block';
                document.title = `Aapke liye ${decodedName} ka Sandesh!`;
            }

            document.getElementById('shareButton').addEventListener('click', async function() {
                const yourName = document.getElementById('nameInput').value.trim();
                if (yourName === "") {
                    alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§≤‡§ø‡§ñ‡•á‡§Ç!");
                    return;
                }

                const baseUrl = window.location.origin + window.location.pathname;
                const shareableLink = `${baseUrl}?from=${encodeURIComponent(yourName)}`;
                
                const shareData = {
                    title: `ü™î ${yourName} ‡§ï‡•Ä ‡§ì‡§∞ ‡§∏‡•á ‡§¶‡§ø‡§µ‡§æ‡§≤‡•Ä ‡§ï‡•Ä ‡§∂‡•Å‡§≠‡§ï‡§æ‡§Æ‡§®‡§æ‡§è‡§Å ü™î`,
                    text: `‚ú® *${yourName}* ‡§ï‡•Ä ‡§§‡§∞‡§´ ‡§∏‡•á ‡§Ü‡§™‡§ï‡•ã ‡§î‡§∞ ‡§Ü‡§™‡§ï‡•á ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡•ã ‡§¶‡§ø‡§µ‡§æ‡§≤‡•Ä ‡§ï‡•Ä ‡§π‡§æ‡§∞‡•ç‡§¶‡§ø‡§ï ‡§∂‡•Å‡§≠‡§ï‡§æ‡§Æ‡§®‡§æ‡§è‡§Å! ‚ú®\n\nMera yeh pyara sa sandesh dekhne ke liye neeche link par click karein üëá`,
                    url: shareableLink,
                };

                if (navigator.share) {
                    try {
                        await navigator.share(shareData);
                    } catch (err) {
                        console.error('Error sharing:', err);
                    }
                } else {
                    console.log('Web Share API not supported, falling back to WhatsApp.');
                    const whatsappText = `${shareData.text}\n\n${shareData.url}`;
                    const whatsappLink = `https://api.whatsapp.com/send?text=${encodeURIComponent(whatsappText)}`;
                    window.open(whatsappLink, '_blank');
                }
            });
        };

        // Firecracker effect ka code (Updated for more intensity)
        const canvas = document.getElementById('fireworks-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        let fireworks = [], particles = [];
        const fireworkColors = ['#FFD700', '#FF4500', '#FFFFFF', '#FF69B4', '#00FFFF', '#FF1493'];
        
        function launchFirework() {
            // Screen par max firework ki sankhya badhai (10 se 15)
            if (fireworks.length < 15) {
                const sX = Math.random() * canvas.width, sY = canvas.height, eX = sX, eY = Math.random() * (canvas.height / 2);
                fireworks.push({ x: sX, y: sY, tx: eX, ty: eY, speed: 0.05, angle: Math.atan2(eY - sY, eX - sX) });
            }
        }

        function createParticles(x, y) {
            const particleCount = 120; // Explosion mein particles badhaye
            const color = fireworkColors[Math.floor(Math.random() * fireworkColors.length)];
            for (let i = 0; i < particleCount; i++) {
                const a = Math.random() * Math.PI * 2, s = Math.random() * 5 + 1; // Speed thodi badhai
                particles.push({ x: x, y: y, vx: Math.cos(a) * s, vy: Math.sin(a) * s, alpha: 1, color: c, gravity: 0.05 });
            }
        }

        function animate() {
            requestAnimationFrame(animate);
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Firework launch karne ki probability 3 guna badhai (0.04 se 0.12)
            if (Math.random() < 0.12) {
                launchFirework();
            }

            for (let i = fireworks.length - 1; i >= 0; i--) {
                const f = fireworks[i];
                if (f.y < f.ty) { createParticles(f.x, f.y); fireworks.splice(i, 1); }
                else { f.x += Math.cos(f.angle) * 5; f.y += Math.sin(f.angle) * 5; ctx.beginPath(); ctx.arc(f.x, f.y, 2, 0, Math.PI * 2); ctx.fillStyle = '#FFFFFF'; ctx.fill(); }
            }
            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i];
                p.x += p.vx; p.y += p.vy; p.vy += p.gravity; p.alpha -= 0.02;
                if (p.alpha <= 0) { particles.splice(i, 1); }
                else { ctx.save(); ctx.globalAlpha = p.alpha; ctx.beginPath(); ctx.arc(p.x, p.y, 2, 0, Math.PI * 2); ctx.fillStyle = p.color; ctx.fill(); ctx.restore(); }
            }
        }
        window.addEventListener('resize', () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; });
        animate();
    </script>
</body>
</html>
